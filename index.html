<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Yogito Pixel Pro</title>
<link rel="icon" href="https://i.imgur.com/WU82uOE.jpeg">
<style>
  body { margin: 0; background: #1a1a1a; color: #fff; font-family: sans-serif; height: 100vh; display: flex; flex-direction: column; overflow: hidden; touch-action: none; }
  header { height: 45px; display: flex; align-items: center; justify-content: center; gap: 10px; background: #111; border-bottom: 1px solid #333; font-weight: bold; }
  #palette { height: 60px; display: flex; gap: 10px; padding: 0 15px; align-items: center; overflow-x: auto; background: #111; border-bottom: 1px solid #222; }
  .color { width: 35px; height: 35px; border-radius: 50%; border: 2px solid #444; flex-shrink: 0; cursor: pointer; }
  .color.active { border-color: #fff; transform: scale(1.1); box-shadow: 0 0 10px rgba(255,255,255,0.3); }
  #wrap { flex: 1; position: relative; overflow: hidden; background: #222; }
  canvas { display: block; image-rendering: pixelated; touch-action: none; }
  #controls { position: absolute; bottom: 20px; right: 20px; display: flex; flex-direction: column; gap: 10px; z-index: 100; }
  .btn { width: 50px; height: 50px; background: #eee; color: #000; border: 2px solid #000; border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 24px; cursor: pointer; box-shadow: 3px 3px 0 #000; -webkit-tap-highlight-color: transparent; }
  .btn:active { transform: translate(2px, 2px); box-shadow: 1px 1px 0 #000; }
  #btn-pen.active { background: #ffd700; }
  #ui-info { position: absolute; top: 10px; left: 10px; background: rgba(0,0,0,0.6); padding: 5px 10px; border-radius: 5px; font-size: 12px; pointer-events: none; }
</style>
</head>
<body>

<header>
  <img src="https://i.imgur.com/WU82uOE.jpeg" style="height:25px; border-radius:4px;">
  Yogito Pixel
</header>

<div id="palette"></div>

<div id="wrap">
  <canvas id="canvas"></canvas>
  <div id="ui-info">Sol Tık: Çiz | Sağ Tık/Kaydır: Gez</div>
  <div id="controls">
    <div class="btn" id="btn-zoom-in">+</div>
    <div class="btn" id="btn-zoom-out">−</div>
    <div class="btn" id="btn-pen">✎</div>
  </div>
</div>

<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");
const btnPen = document.getElementById("btn-pen");

let MAP_SIZE = 1000;
let scale = 20;
let offsetX = window.innerWidth / 2 - (MAP_SIZE * scale) / 2;
let offsetY = (window.innerHeight - 105) / 2 - (MAP_SIZE * scale) / 2;
let currentColor = "#ff0000";
let pixels = {};
let isDrawMode = true; // Varsayılan çizim açık

const colors = ["#ffffff","#000000","#ff0000","#00ff00","#0000ff","#ffff00","#ffa500","#964b00"];
const palette = document.getElementById("palette");

colors.forEach(c => {
  const d = document.createElement("div");
  d.className = "color"; d.style.background = c;
  if (c === currentColor) d.classList.add("active");
  d.onclick = () => {
    currentColor = c;
    document.querySelectorAll(".color").forEach(x => x.classList.remove("active"));
    d.classList.add("active");
  };
  palette.appendChild(d);
});

btnPen.classList.add("active");
btnPen.onclick = () => {
  isDrawMode = !isDrawMode;
  btnPen.classList.toggle("active", isDrawMode);
};

function draw() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight - 105;
  ctx.fillStyle = "#333";
  ctx.fillRect(0, 0, canvas.width, canvas.height);

  ctx.save();
  ctx.translate(offsetX, offsetY);
  ctx.scale(scale, scale);

  // Kağıt Alanı
  ctx.fillStyle = "#ffffff";
  ctx.fillRect(0, 0, MAP_SIZE, MAP_SIZE);

  // Pixeller
  for (const key in pixels) {
    const [x, y] = key.split(",");
    ctx.fillStyle = pixels[key];
    ctx.fillRect(parseInt(x), parseInt(y), 1, 1);
  }

  // Izgara
  if (scale > 10) {
    ctx.strokeStyle = "#ddd";
    ctx.lineWidth = 0.05;
    ctx.beginPath();
    for(let i=0; i<=MAP_SIZE; i++) {
      ctx.moveTo(i, 0); ctx.lineTo(i, MAP_SIZE);
      ctx.moveTo(0, i); ctx.lineTo(MAP_SIZE, i);
    }
    ctx.stroke();
  }
  ctx.restore();
}

let isPointerDown = false;
let lastPointerPos = { x: 0, y: 0 };
let mode = "none"; // "draw" veya "move"

function handlePointerDown(e) {
  isPointerDown = true;
  lastPointerPos = { x: e.clientX, y: e.clientY };
  
  // Sağ tık veya kalem modu kapalıysa gezinti moduna geç
  if (e.button === 2 || !isDrawMode) {
    mode = "move";
  } else {
    mode = "draw";
    const rect = canvas.getBoundingClientRect();
    const px = Math.floor((e.clientX - rect.left - offsetX) / scale);
    const py = Math.floor((e.clientY - rect.top - offsetY) / scale);
    paint(px, py);
  }
}

function handlePointerMove(e) {
  if (!isPointerDown) return;

  if (mode === "move") {
    offsetX += e.clientX - lastPointerPos.x;
    offsetY += e.clientY - lastPointerPos.y;
    lastPointerPos = { x: e.clientX, y: e.clientY };
    draw();
  } else if (mode === "draw") {
    const rect = canvas.getBoundingClientRect();
    const px = Math.floor((e.clientX - rect.left - offsetX) / scale);
    const py = Math.floor((e.clientY - rect.top - offsetY) / scale);
    paint(px, py);
  }
}

function paint(x, y) {
  if (x >= 0 && x < MAP_SIZE && y >= 0 && y < MAP_SIZE) {
    const key = `${x},${y}`;
    if (pixels[key] !== currentColor) {
      pixels[key] = currentColor;
      draw();
    }
  }
}

canvas.addEventListener("pointerdown", handlePointerDown);
window.addEventListener("pointermove", handlePointerMove);
window.addEventListener("pointerup", () => { isPointerDown = false; mode = "none"; });
canvas.addEventListener("contextmenu", e => e.preventDefault());

document.getElementById("btn-zoom-in").onclick = () => { scale *= 1.5; draw(); };
document.getElementById("btn-zoom-out").onclick = () => { scale /= 1.5; draw(); };

window.addEventListener("resize", draw);
draw();
</script>
</body>
</html>

<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Yogito Pixel / Bayrak Ä°nmez</title>
<style>
  body { margin: 0; background: #1a1a1a; color: #fff; font-family: Arial, sans-serif; display: flex; flex-direction: column; height: 100vh; overflow: hidden; }
  header { height: 40px; line-height: 40px; text-align: center; background: #111; z-index: 10; font-weight: bold; border-bottom: 1px solid #333; font-size: 14px; }
  #palette { height: 55px; display: flex; gap: 8px; padding: 0 10px; align-items: center; overflow-x: auto; background: #111; z-index: 10; border-bottom: 1px solid #222; }
  .color { width: 35px; height: 35px; border-radius: 8px; border: 2px solid #333; cursor: pointer; flex-shrink: 0; }
  .color.active { border-color: #fff; transform: scale(1.1); }
  #wrap { flex: 1; position: relative; overflow: hidden; background: #1a1a1a; }
  canvas { image-rendering: pixelated; touch-action: none; background: #ffffff; display: block; }
</style>
</head>
<body>

<header>Yogito Pixel / Bayrak Ä°nmez ðŸ‡¹ðŸ‡·</header>
<div id="palette"></div>

<div id="wrap">
  <canvas id="canvas"></canvas>
  <div id="ui">BaÄŸlanÄ±yor...</div>
</div>

<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");
const ui = document.getElementById("ui");

const MAP_SIZE = 2000;
let scale = 10;
let offsetX = window.innerWidth / 2 - (MAP_SIZE * scale) / 2;
let offsetY = (window.innerHeight - 95) / 2 - (MAP_SIZE * scale) / 2;
let currentColor = "#ff0000";
let pixels = {};
let isDrawMode = false;

const colors = ["#ffffff","#000000","#ff0000","#00ff00","#0000ff","#ffff00","#ff00ff","#00ffff","#ffa500","#964b00"];
const palette = document.getElementById("palette");

colors.forEach(c => {
  const d = document.createElement("div");
  d.className = "color";
  d.style.background = c;
  if (c === currentColor) d.classList.add("active");
  d.onclick = () => {
    currentColor = c;
    document.querySelectorAll(".color").forEach(x => x.classList.remove("active"));
    d.classList.add("active");
  };
  palette.appendChild(d);
});

function draw() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight - 95;
  ctx.fillStyle = "#fff";
  ctx.fillRect(0, 0, canvas.width, canvas.height);

  ctx.save();
  ctx.translate(offsetX, offsetY);
  ctx.scale(scale, scale);

  for (const key in pixels) {
    const [x, y] = key.split(",");
    ctx.fillStyle = pixels[key];
    ctx.fillRect(x, y, 1, 1);
  }

  ctx.restore();
}

function getPixelPointer(x, y) {
  const r = canvas.getBoundingClientRect();
  return {
    x: Math.floor((x - r.left - offsetX) / scale),
    y: Math.floor((y - r.top - offsetY) / scale)
  };
}

let isDragging = false;
let lastPos = { x: 0, y: 0 };

const startHook = (x, y) => {
  isDragging = true;
  lastPos = { x, y };

  if (isDrawMode) { // âœ… DÃœZELTÄ°LEN YER
    const pos = getPixelPointer(x, y);
    if (pos.x >= 0 && pos.x < MAP_SIZE && pos.y >= 0 && pos.y < MAP_SIZE) {
      pixels[`${pos.x},${pos.y}`] = currentColor;
      draw();
    }
  }
};

const moveHook = (x, y) => {
  if (!isDragging) return;

  if (isDrawMode) {
    const pos = getPixelPointer(x, y);
    if (pos.x >= 0 && pos.x < MAP_SIZE && pos.y >= 0 && pos.y < MAP_SIZE) {
      pixels[`${pos.x},${pos.y}`] = currentColor;
      draw();
    }
  } else {
    offsetX += x - lastPos.x;
    offsetY += y - lastPos.y;
    lastPos = { x, y };
    draw();
  }
};

canvas.addEventListener("mousedown", e => startHook(e.clientX, e.clientY));
window.addEventListener("mousemove", e => moveHook(e.clientX, e.clientY));
window.addEventListener("mouseup", () => isDragging = false);

window.addEventListener("resize", draw);

draw(); // âœ… Ä°LK Ã‡Ä°ZÄ°M
ui.innerText = "HazÄ±r";
</script>

</body>
</html>
